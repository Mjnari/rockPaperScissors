<!DOCTYPE html>
<html>

<head>

</head>

<body>
    <div>
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
    </div>

    <script>

        const buttons = document.querySelectorAll('button');

        buttons.forEach((button) => {
            button.addEventListener('click', (e) => {
                game(button.id);
            });
        });

        let score = 0;
        function computerPlay() {
            let cpuSelection = Math.floor(Math.random() * 3);
            switch (cpuSelection) {
                case 0: return "rock";;
                    break;
                case 1: return "paper"
                    break;
                case 2: return "scissors";
                    break;
            }
        }

        function playRound(playerSelection, cpuSelection) {
            playerSelction = playerSelection.toLowerCase();

            let draw = function (playerSelection, cpuSelection) {
                return `Draw, ${playerSelection} ties with ${cpuSelection}!`
            };

            let loss = function (playerSelction, cpuSelection) {
                return `Loss, ${playerSelction} loses to ${cpuSelection}`
            };

            let win = function (playerSelction, cpuSelection) {
                score++;
                return `Win, ${playerSelction} beats ${cpuSelection}!`
            };

            switch (playerSelection) {
                case "rock":
                    switch (cpuSelection) {
                        case "rock": return draw(playerSelection, cpuSelection);
                            break;
                        case "paper": return loss(playerSelection, cpuSelection);
                            break;
                        case "scissors": return win(playerSelection, cpuSelection);
                            break;
                    }
                    break;
                case "paper":
                    switch (cpuSelection) {
                        case "rock": return win(playerSelection, cpuSelection);
                            break;
                        case "paper": return draw(playerSelection, cpuSelection);
                            break;
                        case "scissors": return loss(playerSelection, cpuSelection);
                            break;
                    }
                    break;
                case "scissors":
                    switch (cpuSelection) {
                        case "rock": return loss(playerSelection, cpuSelection);
                            break;
                        case "paper": return win(playerSelection, cpuSelection);
                            break;
                        case "scissors": return draw(playerSelection, cpuSelection);
                            break;
                    }
                    break;

            }
        }

        let game = async function (playerSelction) {
            let playAgain = "yes";
            while (playAgain == "yes") {
                //playerSelction = prompt("Enter rock, paper, or scissors", "rock");
                //playerSelction = playerSelction.toLowerCase();
                await alert(playRound(playerSelction, computerPlay()));
                await alert(`Final Score: ${score}`);

                playAgain = prompt("Play again? Yes : No", "yes");
                playAgain = playAgain.toLowerCase();
            }
            await alert("Thanks for playing!");
        };

    </script>
</body>

</html>